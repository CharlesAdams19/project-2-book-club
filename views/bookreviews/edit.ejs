<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head.ejs') %>

  <head>
    <title>Edit <%= bookreview.bookName %> | The Bookish Review</title>
  </head>

  <body>
    <%- include('../partials/nav.ejs') %>

    <main class="form-wrapper" id="main-content">
      <h1 class="form-title">Edit Your Review for "<%= bookreview.bookName %>"</h1>

      <form class="styled-form" action="/bookreviews/<%= bookreview._id %>?_method=PUT" method="POST">
        <label for="bookName">Book Name</label>
        <input
          type="text"
          id="bookName"
          name="bookName"
          value="<%= bookreview.bookName %>"
          required
        />

        <label for="reviewText">Review</label>
        <textarea
          id="reviewText"
          name="reviewText"
          rows="6"
          required
        ><%= bookreview.reviewText %></textarea>

        <label for="genre">Genre</label>
        <select name="tags" id="genre" required>
          <option disabled value="">-- Select a genre --</option>
          <% const genres = ['Fiction', 'Non-Fiction', 'Sci-Fi', 'Fantasy', 'Mystery', 'Thriller', 'Romance', 'Historical', 'Horror', 'Biography', 'Memoir', 'Self-help', 'Poetry', 'Classic', 'Young Adult (YA)']; %>
          <% genres.forEach(genre => { %>
            <option value="<%= genre %>" <%= bookreview.tags.includes(genre) ? 'selected' : '' %>><%= genre %></option>
          <% }) %>
        </select>
        

        <button type="submit">Update Review</button>
      </form>

      <p style="margin-top: 1rem;"><a href="/bookreviews/<%= bookreview._id %>">‚Üê Back to review</a></p>
    </main>

    <footer style="margin-top: 2rem;">
      <a href="https://github.com/CharlesAdams19" target="_blank">GitHub link</a>
    </footer>
  </body>
</html>
